# Текстовый доклад

## Обо мне

Меня зовут Ваганов Вадим, я руководитель разработки и Head of Profession Backend в Газпромбанке.
Я обожаю делиться опытом, а также обучать и приносить пользу другим. Все мои доклады я строю на своих личных
историях, так что этот будет таким же. Если тебе понравится доклад и ты захочешь ознакомиться с другим моим
контентом - приглашаю в [мой телеграм-канал](https://t.me/vaganov_vadim). Погнали!

## Что делать, если есть трудности с презентацией и оценкой своей работы

Когда я только начинал, я выбрал дорожку бэкенда. Тогда ещё не было такого обилия курсов, поэтому я учился по 
ресурсам, которые мог найти, а также старался применить навыки программирования в ежедневной деятельности - в работе,
для бытовых задач и т. д. (кстати, это лучший способ стать разработчиком, если разрабатываешь - то ты разработчик).

Перегоняешь какие-то байтики между файликами, что-то выводишь в консоль, радуясь тому, что у тебя хоть что-то 
скомпилировалось и заработало, правда вот тут баг какой-то, с которым ты ещё не разобрался, ну да ладно, прогресс.
Показываешь другу не-айтишнику - и он такой: "Ничего не понятно, но очень интересно, ты молодец (а что он делает-то?)"

В это время фронтэндер рисует красивейшую кнопку, которая просто икрементирует число, реакция - "ЕДРИТЬ, ЧУВАК, ДА 
ТЫ БОГ, ТЫ СОЗДАЛ ЧТО-ТО ИЗ НИЧЕГО, ГДЕ ЭТОМУ НАУЧИТЬСЯ?"

Ну понимаете о чём я - продемонстрировать это тяжелее.

И самое интересное, что проблема-то гораздо глубже, чем убедить друга, что ты занимаешься не какой-то фигнёй.
Годом позже поймёшь, что в общем-то демонстрировать свою работу нужно как коллегам по команде, так и представителям 
бизнеса, ну да ладно, у нас UI красивый, на нём всё видно. А потом ты попадаешь в команду, где нет UI - таааааааак, 
падажи...

Позже окажется, что без мониторинга **вы слепы**, вы просто не знаете, что происходит с приложением, особенно под 
нагрузкой.

Также оказалось, что эта тема по какой-то причине недооценённая. Часто задумываются о качественном мониторинге 
только люди, работающие с высокой нагрузкой. Не совершайте эту ошибку, вам нужен мониторинг.  

Обещание: дам вам понимание и мотивацию погрузиться в мониторинг, докажу, почему вам стоит углубиться в этот навык, 
и объясню, почему благодаря мониторингу вы станете более крутым инженером.

Решение - мониторинг. Давайте разбираться.

## Как метрики и мониторинг могут помочь решить эту проблему

Важно: я не хочу просто рассказывать и сделать этой вводной лекцией по мониторингу. Я хочу поделиться опытом и дать 
перспективу - очевидно, что вы когда-нибудь услышите, что мониторинг это важно. Но я попробую вас поттолкнуть 
открыть его для себя пораньше, вы не пожалеете.

Также дисклеймер: мониторинг - более широкая тема, но сегодня будет говорить в первую очередь про метрики и их 
визуализацию.

Давайте начнём с простого - когда вы сделали фичу - как вы поймёте, что она работает?
Ну окей, написали тесты, прошли код-ревью, как понять, что на продакшене фича работает?

Кидаем запрос. Работает. Достаточно? Кидаем ещё 100 - работает. А потом прилетает другие 100, которые не работают.

Возможно, вы скажете - логи. Да, логи правда нужны и важны. Но внезапно у вас приходит не 100 запросов, а 100 
запросов в секунду. Ручками просмотрим все логи? Можно, но неудобно. Логирование - важная тема, но давайте её 
сегодня оставим за скобками.

Так вот, как вашему коллеге понять, что всё работает как надо? ДевОпсу, поддержке, вашему боссу? Чёрт возьми, да как 
самому понять, что оно "взлетело"?

```text
Без мониторинга вы слепы. Вы не знаете, что происходит с вашим приложением, вы даже не знаете, работает ли фича как вы 
ожидаете.
```

Давайте подумаем, а чего мы собственно хотим? Мы хотим получить какую-то информацию о состоянии приложения в моменте 
времени. Внезапно, такая штука существует и называется "метрики". Метрики - это данные, которые собираются для 
измерения и отслеживания состояния системы.

Окей, мы посмотрели, что такое [micrometer](https://micrometer.io/) или аналог, если у вас не java. Смогли настроить,
получили портянку.

Что-то из неё можем получить, да, какой-то текущий срез состояния приложения. Но, вот проблема, нам историчность 
какая-то нужна, метрики вещь относительная, мы не можем судить только по кванту времени, за который взяты метрики, 
иначе получится как с примером выше. То есть, нам бы это где-то хранить.

Берём [Prometheus](http://prometheus.io/), который решает эту проблему - он "забирает" метрики приложения и хранит 
их, позволяя делать 
выборки по времени.

Так, осталась ещё одна проблема - по сути у нас есть "сырые" данные, которыми мы можем оперировать, но "красоты" тут 
всё ещё нет. [Grafana](https://grafana.com/) - идёт нас спасать!

Инструментарий готов. Теперь мы можем:
- создавать любые метрики в приложении;
- собирать, хранить и получать метрики за выбранный период;
- визуализировать метрики как душе угодно.

Это настолько просто и эффективно, что нет никаких оправданий не делать это. В итоге у нас база, на которой мы можем 
работать и наш бэкенд теперь тоже _красивый_, не стыдно другу показать!

## Что отслеживать в backend-приложениях

Когда я только начинал работать с мониторингом, у меня была одна большая ошибка — я думал, что достаточно просто "собирать данные". Но потом я понял, что важно не просто собирать данные, а собирать правильные данные. Те, которые действительно помогут понять, что происходит с системой, и вовремя на это реагировать. Давайте разберём, что именно стоит отслеживать в backend-приложениях, чтобы не повторять моих ошибок.
1. Производительность приложения

   Время ответа (Response Time): Помните, как я рассказывал про свои первые попытки что-то сделать на бэкенде? Так вот, тогда я даже не задумывался о том, сколько времени занимает обработка запроса. А зря. Время ответа — это то, что напрямую влияет на пользовательский опыт. Если оно растёт, это первый звоночек, что что-то пошло не так.

   Количество запросов в секунду (RPS): Это как счётчик в спортзале — чем больше, тем лучше, но только если система справляется. Если RPS растёт, а время ответа увеличивается, это сигнал, что пора что-то делать.

   Процент ошибок (Error Rate): Ошибки — это как шишки на лбу: чем их больше, тем больнее. Если процент ошибок растёт, это повод задуматься, что не так с вашим кодом или инфраструктурой.

2. Состояние серверов и инфраструктуры

   Загрузка CPU и памяти: Однажды я столкнулся с ситуацией, когда сервер просто "упал" из-за того, что память закончилась. С тех пор я всегда слежу за этими показателями. Если процессор или память загружены на 100%, это не просто "ой, что-то пошло не так", это "срочно нужно что-то делать".

   Дисковое пространство: Ещё одна история из моей практики — сервер перестал работать, потому что закончилось место на диске. Теперь я всегда слежу за этим. Не повторяйте моих ошибок.

3. Интеграции с внешними сервисами

   Время ответа внешних API: Однажды я столкнулся с тем, что наше приложение стало работать медленно из-за того, что внешний API начал отвечать с задержками. С тех пор я всегда слежу за временем ответа внешних сервисов.

   Количество ошибок при интеграции: Если внешний сервис возвращает ошибки, это может привести к сбоям в вашем приложении. Я всегда стараюсь отслеживать такие ошибки и оперативно на них реагировать.

4. Бизнес-метрики

   РАССКАЗАТЬ ПРО ДЕНЬГИ

   Количество активных пользователей: Это как счётчик посетителей в магазине. Если их слишком много, нужно быть готовым к нагрузке. Если слишком мало — задуматься, почему.

   Конверсии и ключевые действия: Если ваше приложение связано с бизнес-процессами, важно отслеживать ключевые метрики, такие как конверсии или количество заказов. Это помогает понять, насколько успешно работает ваше приложение.

## Почему мониторинг — это навык, который стоит прокачать любому инженеру
1. Трансформация инженерной роли

   Мониторинг как важная составляющая DevOps и SRE практик: Современные инженеры всё чаще сталкиваются с задачами, которые выходят за рамки чистой разработки. Мониторинг становится неотъемлемой частью DevOps и Site Reliability Engineering (SRE). Это значит, что вы должны не только писать код, но и понимать, как этот код работает в реальных условиях.

   Взаимодействие мониторинга с процессами CI/CD: Мониторинг помогает убедиться, что новые изменения не приводят к ухудшению производительности или стабильности системы. Интеграция мониторинга в CI/CD позволяет быстро выявлять проблемы и откатывать изменения, если что-то пошло не так.

2. Навыки в аналитике и автоматизации

   Построение дашбордов: Умение создавать информативные дашборды — это важный навык, который помогает визуализировать данные и делать их понятными для коллег и руководства.

   Написание скриптов для анализа логов: Логи — это мощный инструмент для диагностики проблем, но без автоматизации их анализ может занимать много времени. Навыки написания скриптов для анализа логов помогут вам быстрее находить корневые причины проблем.

3. Роль мониторинга в будущем

   Растущая сложность распределённых систем и микросервисной архитектуры: Современные системы становятся всё более сложными. Микросервисы, контейнеры, оркестраторы — всё это требует более глубокого понимания того, как система работает в целом. Мониторинг помогает справляться с этой сложностью.

   Важность уметь предвидеть и предотвращать проблемы: В будущем успешные инженеры будут не только решать проблемы, но и предотвращать их. Мониторинг позволяет выявлять аномалии и потенциальные угрозы до того, как они приведут к сбоям.

## Подведение итогов

Мониторинг — это не просто инструмент, это философия. Это способ мышления, который помогает вам быть в курсе того, что происходит с вашей системой, и принимать обоснованные решения.

Метрики - это не только когда хочешь смотреть когда плохо, но и когда хорошо, ауф

    Мониторинг делает вас более уверенным инженером. Когда вы знаете, что происходит с вашим приложением, вы можете спокойно спать по ночам, зная, что система под контролем.

    Мониторинг помогает вам расти. Это навык, который будет полезен не только в вашей текущей работе, но и в будущем. Чем раньше вы начнёте погружаться в эту тему, тем быстрее вы станете более востребованным специалистом.

    Мониторинг — это инвестиция в стабильность и качество. В конечном итоге, это то, что делает ваше приложение надёжным, а вашу команду — эффективной.

Так что, если вы ещё не начали заниматься мониторингом, самое время начать. У вас есть все инструменты, все знания и все возможности. Осталось только сделать первый шаг. Удачи!

Если у вас остались вопросы или вы хотите обсудить тему мониторинга более подробно, я всегда рад пообщаться. Присоединяйтесь к моему телеграм-каналу, где я делюсь своими мыслями и опытом. Спасибо за внимание!